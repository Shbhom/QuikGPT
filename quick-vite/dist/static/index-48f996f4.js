(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function i(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(n){if(n.ep)return;n.ep=!0;const r=i(n);fetch(n.href,r)}})();const W=new Set,d=new WeakMap,b=new WeakMap,m=new WeakMap,P=new WeakMap,j=new WeakMap,E=new WeakMap,T=new WeakMap,M=new WeakSet;let y;const l="__aa_tgt",N="__aa_del",I=e=>{const t=F(e);t&&t.forEach(i=>D(i))},R=e=>{e.forEach(t=>{t.target===y&&B(),d.has(t.target)&&v(t.target)})};function _(e){const t=P.get(e);t==null||t.disconnect();let i=d.get(e),o=0;const n=5;i||(i=O(e),d.set(e,i));const{offsetWidth:r,offsetHeight:s}=y,u=[i.top-n,r-(i.left+n+i.width),s-(i.top+n+i.height),i.left-n].map(p=>`${-1*Math.floor(p)}px`).join(" "),c=new IntersectionObserver(()=>{++o>1&&v(e)},{root:y,threshold:1,rootMargin:u});c.observe(e),P.set(e,c)}function v(e){clearTimeout(T.get(e));const t=x(e),i=typeof t=="function"?500:t.duration;T.set(e,setTimeout(async()=>{const o=m.get(e);try{await(o==null?void 0:o.finished),d.set(e,O(e)),_(e)}catch{}},i))}function B(){clearTimeout(T.get(y)),T.set(y,setTimeout(()=>{W.forEach(e=>z(e,t=>A(()=>v(t))))},100))}function q(e){setTimeout(()=>{j.set(e,setInterval(()=>A(v.bind(null,e)),2e3))},Math.round(2e3*Math.random()))}function A(e){typeof requestIdleCallback=="function"?requestIdleCallback(()=>e()):requestAnimationFrame(()=>e())}let L,w;typeof window<"u"&&(y=document.documentElement,L=new MutationObserver(I),w=new ResizeObserver(R),w.observe(y));function F(e){return e.reduce((o,n)=>[...o,...Array.from(n.addedNodes),...Array.from(n.removedNodes)],[]).every(o=>o.nodeName==="#comment")?!1:e.reduce((o,n)=>{if(o===!1)return!1;if(n.target instanceof Element){if(C(n.target),!o.has(n.target)){o.add(n.target);for(let r=0;r<n.target.children.length;r++){const s=n.target.children.item(r);if(s){if(N in s)return!1;C(n.target,s),o.add(s)}}}if(n.removedNodes.length)for(let r=0;r<n.removedNodes.length;r++){const s=n.removedNodes[r];if(N in s)return!1;s instanceof Element&&(o.add(s),C(n.target,s),b.set(s,[n.previousSibling,n.nextSibling]))}}return o},new Set)}function C(e,t){!t&&!(l in e)?Object.defineProperty(e,l,{value:e}):t&&!(l in t)&&Object.defineProperty(t,l,{value:e})}function D(e){var t;const i=e.isConnected,o=d.has(e);i&&b.has(e)&&b.delete(e),m.has(e)&&((t=m.get(e))===null||t===void 0||t.cancel()),o&&i?K(e):o&&!i?Q(e):H(e)}function f(e){return Number(e.replace(/[^0-9.\-]/g,""))}function O(e){const t=e.getBoundingClientRect();return{top:t.top+window.scrollY,left:t.left+window.scrollX,width:t.width,height:t.height}}function $(e,t,i){let o=t.width,n=t.height,r=i.width,s=i.height;const a=getComputedStyle(e);if(a.getPropertyValue("box-sizing")==="content-box"){const c=f(a.paddingTop)+f(a.paddingBottom)+f(a.borderTopWidth)+f(a.borderBottomWidth),p=f(a.paddingLeft)+f(a.paddingRight)+f(a.borderRightWidth)+f(a.borderLeftWidth);o-=p,r-=p,n-=c,s-=c}return[o,r,n,s].map(Math.round)}function x(e){return l in e&&E.has(e[l])?E.get(e[l]):{duration:250,easing:"ease-in-out"}}function k(e){if(l in e)return e[l]}function S(e){const t=k(e);return t?M.has(t):!1}function z(e,...t){t.forEach(i=>i(e,E.has(e)));for(let i=0;i<e.children.length;i++){const o=e.children.item(i);o&&t.forEach(n=>n(o,E.has(o)))}}function K(e){const t=d.get(e),i=O(e);if(!S(e))return d.set(e,i);let o;if(!t)return;const n=x(e);if(typeof n!="function"){const r=t.left-i.left,s=t.top-i.top,[a,u,c,p]=$(e,t,i),h={transform:`translate(${r}px, ${s}px)`},g={transform:"translate(0, 0)"};a!==u&&(h.width=`${a}px`,g.width=`${u}px`),c!==p&&(h.height=`${c}px`,g.height=`${p}px`),o=e.animate([h,g],{duration:n.duration,easing:n.easing})}else o=new Animation(n(e,"remain",t,i)),o.play();m.set(e,o),d.set(e,i),o.addEventListener("finish",v.bind(null,e))}function H(e){const t=O(e);d.set(e,t);const i=x(e);if(!S(e))return;let o;typeof i!="function"?o=e.animate([{transform:"scale(.98)",opacity:0},{transform:"scale(0.98)",opacity:0,offset:.5},{transform:"scale(1)",opacity:1}],{duration:i.duration*1.5,easing:"ease-in"}):(o=new Animation(i(e,"add",t)),o.play()),m.set(e,o),o.addEventListener("finish",v.bind(null,e))}function Q(e){var t;if(!b.has(e)||!d.has(e))return;const[i,o]=b.get(e);Object.defineProperty(e,N,{value:!0}),o&&o.parentNode&&o.parentNode instanceof Element?o.parentNode.insertBefore(e,o):i&&i.parentNode?i.parentNode.appendChild(e):(t=k(e))===null||t===void 0||t.appendChild(e);function n(){var g;e.remove(),d.delete(e),b.delete(e),m.delete(e),(g=P.get(e))===null||g===void 0||g.disconnect()}if(!S(e))return n();const[r,s,a,u]=U(e),c=x(e),p=d.get(e);let h;Object.assign(e.style,{position:"absolute",top:`${r}px`,left:`${s}px`,width:`${a}px`,height:`${u}px`,margin:0,pointerEvents:"none",transformOrigin:"center",zIndex:100}),typeof c!="function"?h=e.animate([{transform:"scale(1)",opacity:1},{transform:"scale(.98)",opacity:0}],{duration:c.duration,easing:"ease-out"}):(h=new Animation(c(e,"remove",p)),h.play()),m.set(e,h),h.addEventListener("finish",n)}function U(e){const t=d.get(e),[i,,o]=$(e,t,O(e));let n=e.parentElement;for(;n&&(getComputedStyle(n).position==="static"||n instanceof HTMLBodyElement);)n=n.parentElement;n||(n=document.body);const r=getComputedStyle(n),s=d.get(n)||O(n),a=Math.round(t.top-s.top)-f(r.borderTopWidth),u=Math.round(t.left-s.left)-f(r.borderLeftWidth);return[a,u,i,o]}function X(e,t={}){return L&&w&&(window.matchMedia("(prefers-reduced-motion: reduce)").matches&&typeof t!="function"&&!t.disrespectUserMotionPreference||(M.add(e),getComputedStyle(e).position==="static"&&Object.assign(e.style,{position:"relative"}),z(e,v,q,n=>w==null?void 0:w.observe(n)),typeof t=="function"?E.set(e,t):E.set(e,{duration:250,easing:"ease-in-out",...t}),L.observe(e,{childList:!0}),W.add(e))),Object.freeze({parent:e,enable:()=>{M.add(e)},disable:()=>{M.delete(e)},isEnabled:()=>M.has(e)})}const Y=document.getElementById("response");X(Y);const G=new URLSearchParams(window.location.search),J=G.get("query");chrome.storage.sync.get(["apiKey","maxTokens"],async function(e){const t=e.apiKey,i=e.maxTokens;console.log("API key:",t),console.log("Max Token",i);try{const o=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+t},body:JSON.stringify({model:"gpt-3.5-turbo",messages:[{role:"user",content:J}],temperature:.7})});if(!o.ok)throw console.log(await o.text()),new Error("Error occurred while fetching the response. Status: "+o.status);const n=await o.json();console.log(n);const r=n.choices[0].message.content.replace(/(?:\r\n|\r|\n)/g,"<br>");o.removeChild(o.firstElementChild);const s=document.createElement("p");s.innerHTML=r,o.appendChild(s)}catch(o){document.getElementById("response").textContent="An error occurred: "+o.message}});
